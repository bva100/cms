var DOMeditor=document.getElementById("input-code-content");var codeEditor=ace.edit("input-code-content");var codeSavePath=document.getElementById("code-save-path").value;$(document).ready(function(){codeEditor.setTheme("ace/theme/textmate");codeEditor.getSession().setMode("ace/mode/html");codeEditor.getSession().setUseSoftTabs(true);codeEditor.getSession().setTabSize(2);DOMeditor.style.fontSize="14px";DOMeditor.style.fontFamily="DejaVu Sans Mono";codeEditor.commands.addCommand({name:"saveFile",bindKey:{win:"Ctrl-S",mac:"Command-S",sender:"editor|cli"},exec:function(b,a,c){var d=$("#save-template-form").find("button");saveCodeEditor(getCodeEditorParams(),d)}})});$("#save-template-form").on("submit",function(a){a.preventDefault();saveCodeEditor(getCodeEditorParams(),$(this).find("button"))});function getCodeEditorContent(){return codeEditor.getValue()}function getCodeEditorParams(){params={};params.id=document.getElementById("template-id").value;params.siteId=document.getElementById("site-id").value;params.type=document.getElementById("input-template-type").value;params.rawCode=getCodeEditorContent();return params}function saveCodeEditor(b,a){a.text("Saving...").attr("disabled",true);$.post(codeSavePath,b,function(c,e,d){if(d.status==200){a.attr("disabled",false).removeClass("btn-info").addClass("btn-primary").text("Saved").delay(1100).queue(function(){a.removeClass("btn-primary").addClass("btn-info").text("Save");$(this).dequeue()})}else{alert("Cannot save at this time. Please be sure you are logged in and try again. If this problem persists, please contact customer service.");a.attr("disabled",false).text("Save")}}).fail(function(c,e,d){$("#error-container").html('<div class="alert alert-danger">data.responseText</div>')})};